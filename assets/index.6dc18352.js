var Me=Object.defineProperty;var Ce=(e,t,n)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var E=(e,t,n)=>(Ce(e,typeof t!="symbol"?t+"":t,n),n);const De=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};De();function d(){}const Te=e=>e;function fe(e,t){for(const n in t)e[n]=t[n];return e}function ve(e){return e()}function ae(){return Object.create(null)}function S(e){e.forEach(ve)}function Se(e){return typeof e=="function"}function v(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let z;function ee(e,t){return z||(z=document.createElement("a")),z.href=t,e===z.href}function Oe(e){return Object.keys(e).length===0}function Ge(e,...t){if(e==null)return d;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function B(e,t,n){e.$$.on_destroy.push(Ge(t,n))}function N(e,t,n){return e.set(n),t}const Ee=typeof window<"u";let Pe=Ee?()=>window.performance.now():()=>Date.now(),ke=Ee?e=>requestAnimationFrame(e):d;const P=new Set;function Ne(e){P.forEach(t=>{t.c(e)||(P.delete(t),t.f())}),P.size!==0&&ke(Ne)}function Be(e){let t;return P.size===0&&ke(Ne),{promise:new Promise(n=>{P.add(t={c:e,f:n})}),abort(){P.delete(t)}}}function g(e,t){e.appendChild(t)}function I(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode.removeChild(e)}function Le(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function _(e){return document.createElement(e)}function R(e){return document.createTextNode(e)}function T(){return R(" ")}function je(){return R("")}function F(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function We(e){return Array.from(e.childNodes)}function xe(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function he(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function Fe(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}let Y;function H(e){Y=e}function He(){if(!Y)throw new Error("Function called outside component initialization");return Y}function Ve(){const e=He();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=Fe(t,n,{cancelable:i});return r.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}const W=[],de=[],Q=[],me=[],Re=Promise.resolve();let te=!1;function Ye(){te||(te=!0,Re.then(Ae))}function ne(e){Q.push(e)}const Z=new Set;let K=0;function Ae(){const e=Y;do{for(;K<W.length;){const t=W[K];K++,H(t),qe(t.$$)}for(H(null),W.length=0,K=0;de.length;)de.pop()();for(let t=0;t<Q.length;t+=1){const n=Q[t];Z.has(n)||(Z.add(n),n())}Q.length=0}while(W.length);for(;me.length;)me.pop()();te=!1,Z.clear(),H(e)}function qe(e){if(e.fragment!==null){e.update(),S(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}const U=new Set;let C;function ie(){C={r:0,c:[],p:C}}function se(){C.r||S(C.c),C=C.p}function p(e,t){e&&e.i&&(U.delete(e),e.i(t))}function b(e,t,n,i){if(e&&e.o){if(U.has(e))return;U.add(e),C.c.push(()=>{U.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function D(e){e&&e.c()}function L(e,t,n,i){const{fragment:r,on_mount:s,on_destroy:o,after_update:l}=e.$$;r&&r.m(t,n),i||ne(()=>{const c=s.map(ve).filter(Se);o?o.push(...c):S(c),e.$$.on_mount=[]}),l.forEach(ne)}function x(e,t){const n=e.$$;n.fragment!==null&&(S(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ze(e,t){e.$$.dirty[0]===-1&&(W.push(e),Ye(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function A(e,t,n,i,r,s,o,l=[-1]){const c=Y;H(e);const u=e.$$={fragment:null,ctx:null,props:s,update:d,not_equal:r,bound:ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ae(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};o&&o(u.root);let a=!1;if(u.ctx=n?n(e,t.props||{},(f,$,...q)=>{const j=q.length?q[0]:$;return u.ctx&&r(u.ctx[f],u.ctx[f]=j)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](j),a&&ze(e,f)),$}):[],u.update(),a=!0,S(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const f=We(t.target);u.fragment&&u.fragment.l(f),f.forEach(y)}else u.fragment&&u.fragment.c();t.intro&&p(e.$$.fragment),L(e,t.target,t.anchor,t.customElement),Ae()}H(c)}class M{$destroy(){x(this,1),this.$destroy=d}$on(t,n){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!Oe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const O=[];function oe(e,t=d){let n;const i=new Set;function r(l){if(v(e,l)&&(e=l,n)){const c=!O.length;for(const u of i)u[1](),O.push(u,e);if(c){for(let u=0;u<O.length;u+=2)O[u][0](O[u+1]);O.length=0}}}function s(l){r(l(e))}function o(l,c=d){const u=[l,c];return i.add(u),i.size===1&&(n=t(r)||d),l(e),()=>{i.delete(u),i.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}function pe(e){return Object.prototype.toString.call(e)==="[object Date]"}function re(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((r,s)=>re(e[s],r));return r=>i.map(s=>s(r))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(pe(e)&&pe(t)){e=e.getTime(),t=t.getTime();const s=t-e;return o=>new Date(e+o*s)}const i=Object.keys(t),r={};return i.forEach(s=>{r[s]=re(e[s],t[s])}),s=>{const o={};return i.forEach(l=>{o[l]=r[l](s)}),o}}if(n==="number"){const i=t-e;return r=>e+r*i}throw new Error(`Cannot interpolate ${n} values`)}function Ke(e,t={}){const n=oe(e);let i,r=e;function s(o,l){if(e==null)return n.set(e=o),Promise.resolve();r=o;let c=i,u=!1,{delay:a=0,duration:f=400,easing:$=Te,interpolate:q=re}=fe(fe({},t),l);if(f===0)return c&&(c.abort(),c=null),n.set(e=r),Promise.resolve();const j=Pe()+a;let le;return i=Be(ce=>{if(ce<j)return!0;u||(le=q(e,o),typeof f=="function"&&(f=f(e,o)),u=!0),c&&(c.abort(),c=null);const ue=ce-j;return ue>f?(n.set(e=o),!1):(n.set(e=le($(ue/f))),!0)}),i.promise}return{set:s,update:(o,l)=>s(o(r,e),l),subscribe:n.subscribe}}const J=Ke(0),G=oe(1),k=oe(null),V={1:{y:9,x:9,nbMines:10},2:{y:16,x:16,nbMines:40},3:{y:16,x:30,nbMines:99}},ge=12,_e=[{y:-1,x:-1},{y:-1,x:0},{y:-1,x:1},{y:0,x:-1},{y:0,x:1},{y:1,x:-1},{y:1,x:0},{y:1,x:1}];var m=(e=>(e[e.HIDDEN=0]="HIDDEN",e[e.FLAG=1]="FLAG",e[e.FLAG_WRONG=2]="FLAG_WRONG",e[e.CLICKED_MINE=3]="CLICKED_MINE",e[e.QUESTION=4]="QUESTION",e[e.VISIBLE=5]="VISIBLE",e))(m||{}),w=(e=>(e[e.WAITING=0]="WAITING",e[e.PLAYING=1]="PLAYING",e[e.WIN=2]="WIN",e[e.LOST=3]="LOST",e))(w||{});function Qe(e,t){return Math.floor(Math.random()*(t-e+1))+e}class Ue{constructor(t){E(this,"level");E(this,"board");E(this,"width");E(this,"height");E(this,"nbMines");E(this,"nbCellToRevealed");E(this,"gameState");this.level=t,this.board=[],this.width=V[this.level].x,this.height=V[this.level].y,this.nbMines=V[this.level].nbMines,this.nbCellToRevealed=this.width*this.height-this.nbMines,this.gameState=w.WAITING,this.initBoard()}initBoard(){this.board=[];for(let t=0;t<this.height;++t)for(let n=0;n<this.width;++n)this.board.push({isMine:!1,value:0,state:m.HIDDEN})}setValues(){for(let t=0;t<this.height;++t)for(let n=0;n<this.width;++n)for(const i of _e){const r=(t+i.y)*this.width+n+i.x;t+i.y>=0&&t+i.y<this.height&&n+i.x>=0&&n+i.x<this.width&&this.board[r].isMine===!0&&++this.board[t*this.width+n].value}}placeMines(t,n){const i=this.board.filter((s,o)=>t*this.width+n!==o);let r=this.nbMines;for(;r>0;){const s=Qe(0,i.length-1);i[s].isMine=!0,i.splice(s,1),--r}}checkWin(){this.nbCellToRevealed===0&&(this.gameState=w.WIN)}canClick(){return[w.PLAYING,w.WAITING].includes(this.gameState)}revealCell(t,n){let i=m.VISIBLE;const r=this.board[t*this.width+n];if(--this.nbCellToRevealed,this.board[t*this.width+n].state=i,r.value===0)for(const s of _e){const o=(t+s.y)*this.width+n+s.x;t+s.y>=0&&t+s.y<this.height&&n+s.x>=0&&n+s.x<this.width&&this.board[o].state===m.HIDDEN&&this.revealCell(t+s.y,n+s.x)}}leftClick(t,n){if(!this.canClick())return this;this.gameState===w.WAITING&&(this.gameState=w.PLAYING,this.placeMines(t,n),this.setValues());const i=this.board[t*this.width+n];let r=i.state;return i.isMine===!0&&i.state===m.HIDDEN?(r=m.CLICKED_MINE,this.gameState=w.LOST,this.board[t*this.width+n].state=r):i.state===m.HIDDEN&&(this.revealCell(t,n),this.checkWin()),this}rightClick(t,n){if(!this.canClick())return this;const i=this.board[t*this.width+n];let r=m.HIDDEN;return i.state===m.HIDDEN?(r=m.FLAG,--this.nbMines):i.state===m.FLAG?(r=m.QUESTION,++this.nbMines):i.state===m.VISIBLE&&(r=m.VISIBLE),this.board[t*this.width+n].state=r,this}}function Ze(e){let t,n,i,r,s,o,l,c;return{c(){t=_("div"),n=_("button"),n.textContent="Easy",i=T(),r=_("button"),r.textContent="Medium",s=T(),o=_("button"),o.textContent="Hard",h(n,"class","p-3 hover:border-solid hover:border-2 hover:border-neutral-600"),h(r,"class","p-3 hover:border-solid hover:border-2 hover:border-neutral-600"),h(o,"class","p-3 hover:border-solid hover:border-2 hover:border-neutral-600"),h(t,"class","flex justify-center")},m(u,a){I(u,t,a),g(t,n),g(t,i),g(t,r),g(t,s),g(t,o),l||(c=[F(n,"click",e[1]),F(r,"click",e[2]),F(o,"click",e[3])],l=!0)},p:d,i:d,o:d,d(u){u&&y(t),l=!1,S(c)}}}function Je(e,t,n){let i;return B(e,G,l=>n(0,i=l)),[i,()=>N(G,i=1,i),()=>N(G,i=2,i),()=>N(G,i=3,i)]}class Xe extends M{constructor(t){super(),A(this,t,Je,Ze,v,{})}}function et(e){let t,n,i,r,s;return{c(){t=_("div"),n=_("img"),ee(n.src,i=`assets/icons/${e[0]}.svg`)||h(n,"src",i),h(n,"class","w-full h-full"),h(n,"alt",e[0]),h(t,"class","flex relative"),he(t,"width",`${ge/4}rem`,!1),he(t,"height",`${ge/4}rem`,!1)},m(o,l){I(o,t,l),g(t,n),r||(s=[F(t,"click",e[1]),F(t,"contextmenu",e[2])],r=!0)},p(o,[l]){l&1&&!ee(n.src,i=`assets/icons/${o[0]}.svg`)&&h(n,"src",i),l&1&&h(n,"alt",o[0])},i:d,o:d,d(o){o&&y(t),r=!1,S(s)}}}function tt(e,t,n){let{type:i}=t;const r=Ve();function s(l){r("leftclick",l)}function o(l){l.preventDefault(),r("rightclick",l)}return e.$$set=l=>{"type"in l&&n(0,i=l.type)},[i,s,o]}class nt extends M{constructor(t){super(),A(this,t,tt,et,v,{type:0})}}function be(e,t,n){const i=e.slice();return i[7]=t[n],i[9]=n,i}function $e(e,t,n){const i=e.slice();i[7]=t[n],i[12]=n;const r=i[2].board[i[9]*i[1]+i[12]];return i[10]=r,i}function ye(e){let t,n,i=new Array(e[0]).fill(0),r=[];for(let o=0;o<i.length;o+=1)r[o]=Ie(be(e,i,o));const s=o=>b(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=je()},m(o,l){for(let c=0;c<r.length;c+=1)r[c].m(o,l);I(o,t,l),n=!0},p(o,l){if(l&31){i=new Array(o[0]).fill(0);let c;for(c=0;c<i.length;c+=1){const u=be(o,i,c);r[c]?(r[c].p(u,l),p(r[c],1)):(r[c]=Ie(u),r[c].c(),p(r[c],1),r[c].m(t.parentNode,t))}for(ie(),c=i.length;c<r.length;c+=1)s(c);se()}},i(o){if(!n){for(let l=0;l<i.length;l+=1)p(r[l]);n=!0}},o(o){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)b(r[l]);n=!1},d(o){Le(r,o),o&&y(t)}}}function we(e){let t,n;function i(...s){return e[5](e[9],e[12],...s)}function r(...s){return e[6](e[9],e[12],...s)}return t=new nt({props:{type:e[10].state===m.VISIBLE?e[10].value:m[e[10].state]}}),t.$on("leftclick",i),t.$on("rightclick",r),{c(){D(t.$$.fragment)},m(s,o){L(t,s,o),n=!0},p(s,o){e=s;const l={};o&6&&(l.type=e[10].state===m.VISIBLE?e[10].value:m[e[10].state]),t.$set(l)},i(s){n||(p(t.$$.fragment,s),n=!0)},o(s){b(t.$$.fragment,s),n=!1},d(s){x(t,s)}}}function Ie(e){let t,n,i,r=new Array(e[1]).fill(0),s=[];for(let l=0;l<r.length;l+=1)s[l]=we($e(e,r,l));const o=l=>b(s[l],1,1,()=>{s[l]=null});return{c(){t=_("div");for(let l=0;l<s.length;l+=1)s[l].c();n=T(),h(t,"class","flex")},m(l,c){I(l,t,c);for(let u=0;u<s.length;u+=1)s[u].m(t,null);g(t,n),i=!0},p(l,c){if(c&30){r=new Array(l[1]).fill(0);let u;for(u=0;u<r.length;u+=1){const a=$e(l,r,u);s[u]?(s[u].p(a,c),p(s[u],1)):(s[u]=we(a),s[u].c(),p(s[u],1),s[u].m(t,n))}for(ie(),u=r.length;u<s.length;u+=1)o(u);se()}},i(l){if(!i){for(let c=0;c<r.length;c+=1)p(s[c]);i=!0}},o(l){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)b(s[c]);i=!1},d(l){l&&y(t),Le(s,l)}}}function rt(e){let t,n,i,r=e[2].board.length&&ye(e);return{c(){t=_("div"),n=_("div"),r&&r.c(),h(n,"class",""),h(t,"class","flex justify-center select-none")},m(s,o){I(s,t,o),g(t,n),r&&r.m(n,null),i=!0},p(s,[o]){s[2].board.length?r?(r.p(s,o),o&4&&p(r,1)):(r=ye(s),r.c(),p(r,1),r.m(n,null)):r&&(ie(),b(r,1,1,()=>{r=null}),se())},i(s){i||(p(r),i=!0)},o(s){b(r),i=!1},d(s){s&&y(t),r&&r.d()}}}function it(e,t,n){let i;B(e,k,a=>n(2,i=a));let r=V[1].y,s=V[1].x;k.subscribe(a=>{n(0,r=a.height),n(1,s=a.width)});function o(a,f,$){N(k,i=i.leftClick(f,$),i)}function l(a,f,$){N(k,i=i.rightClick(f,$),i)}return[r,s,i,o,l,(a,f,$)=>o($,a,f),(a,f,$)=>l($,a,f)]}class st extends M{constructor(t){super(),A(this,t,it,rt,v,{})}}function ot(e){let t,n,i=e[0].nbMines+"",r,s,o,l;return{c(){t=_("div"),n=_("div"),r=R(i),s=T(),o=_("img"),ee(o.src,l="https://static.thenounproject.com/png/965385-200.png")||h(o,"src",l),h(o,"alt","Mine reminding"),h(o,"width","30"),h(o,"height","30"),h(t,"class","flex items-center space-x-2")},m(c,u){I(c,t,u),g(t,n),g(n,r),g(t,s),g(t,o)},p(c,[u]){u&1&&i!==(i=c[0].nbMines+"")&&xe(r,i)},i:d,o:d,d(c){c&&y(t)}}}function lt(e,t,n){let i;return B(e,k,r=>n(0,i=r)),[i]}class ct extends M{constructor(t){super(),A(this,t,lt,ot,v,{})}}function ut(e){let t,n,i;return{c(){t=_("div"),n=R("Timer "),i=R(e[0])},m(r,s){I(r,t,s),g(t,n),g(t,i)},p(r,[s]){s&1&&xe(i,r[0])},i:d,o:d,d(r){r&&y(t)}}}function X(e){return e<10?`0${e}`:`${e}`}function ft(e,t,n){let i,r;B(e,J,c=>n(3,i=c)),B(e,k,c=>n(4,r=c));let s="00:00:00",o,l=r.gameState;return G.subscribe(c=>{N(J,i=0,i)}),e.$$.update=()=>{if(e.$$.dirty&30&&(r.gameState===w.PLAYING&&l!=w.PLAYING?n(1,o=setInterval(()=>{N(J,++i,i)},1e3)):r.gameState!=w.PLAYING&&o!==void 0&&(clearInterval(o),n(1,o=void 0)),n(2,l=r.gameState)),e.$$.dirty&8){const c=Math.floor(i/3600),u=Math.floor(i%3600/60),a=Math.floor(i%3600%60);n(0,s=`${X(c)}:${X(u)}:${X(a)}`)}},[s,o,l,i,r]}class at extends M{constructor(t){super(),A(this,t,ft,ut,v,{})}}function ht(e){let t,n,i,r,s;return n=new ct({}),r=new at({}),{c(){t=_("div"),D(n.$$.fragment),i=T(),D(r.$$.fragment),h(t,"class","flex justify-center space-x-6")},m(o,l){I(o,t,l),L(n,t,null),g(t,i),L(r,t,null),s=!0},p:d,i(o){s||(p(n.$$.fragment,o),p(r.$$.fragment,o),s=!0)},o(o){b(n.$$.fragment,o),b(r.$$.fragment,o),s=!1},d(o){o&&y(t),x(n),x(r)}}}class dt extends M{constructor(t){super(),A(this,t,null,ht,v,{})}}function mt(e){let t,n,i,r,s,o,l;return t=new Xe({}),r=new dt({}),o=new st({}),{c(){D(t.$$.fragment),n=T(),i=_("div"),D(r.$$.fragment),s=T(),D(o.$$.fragment)},m(c,u){L(t,c,u),I(c,n,u),I(c,i,u),L(r,i,null),g(i,s),L(o,i,null),l=!0},p:d,i(c){l||(p(t.$$.fragment,c),p(r.$$.fragment,c),p(o.$$.fragment,c),l=!0)},o(c){b(t.$$.fragment,c),b(r.$$.fragment,c),b(o.$$.fragment,c),l=!1},d(c){x(t,c),c&&y(n),c&&y(i),x(r),x(o)}}}function pt(e,t,n){let i;return B(e,k,r=>n(0,i=r)),G.subscribe(r=>{N(k,i=new Ue(r),i)}),[]}class gt extends M{constructor(t){super(),A(this,t,pt,mt,v,{})}}function _t(e){let t,n,i;return n=new gt({}),{c(){t=_("main"),D(n.$$.fragment),h(t,"class","w-full h-screen flex flex-col")},m(r,s){I(r,t,s),L(n,t,null),i=!0},p:d,i(r){i||(p(n.$$.fragment,r),i=!0)},o(r){b(n.$$.fragment,r),i=!1},d(r){r&&y(t),x(n)}}}class bt extends M{constructor(t){super(),A(this,t,null,_t,v,{})}}new bt({target:document.getElementById("app")});
